---
output: pdf_document
---

<!-- FUNCIONES NECESARIAS -->
```{r}
source('../R/camel-plot-functions.R')
source('../R/camel-norm-getCamelInd.R')
source('../R/camel-limites-rangos.R')
source('../R/camel-render-table-rangos-limites.R')
source('../R/camel-calificacion-indicadores.R')
source('../R/camel-calificacion-entidad.R')
source('../R/camel-tendencia-indicadores.R')
source('../R/camel-render-table-datTrendInd.R')
```

<!-- DATOS -->
```{r}
datCamelIndNorm <- getDatCamelIndNorm(gestionInc = 2020)
```

# Diagnóstico de las instituciones financieras del sistema financiero de Bolivia

La metodología a aplicar para realizar diagnóstico de las instituciones financieras del sistema financiero de Bolivia sera el denominado como CAMEL, que responde a la evaluación solidez financiera de las instituciones.

\newpage
## Calculo de indicadores 

### Capital

#### Coeficiente de adecuación patrimonial

```{r, out.width='100%', fig.cap='Coeficiente de adecuación patrimonial'}
id <- 'indCap_CAP'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CAP por tipo de entidad' )
```


\newpage
#### Coeficiente de cobertura de cartera en mora

```{r, out.width='100%', fig.cap='Coeficiente de cobertura de cartera en mora'}
id <- 'indCap_CCCM'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CCCM por tipo de entidad' )
```

\newpage
#### Coeficiente acido de cobertura de cartera en mora

```{r, out.width='100%', fig.cap='Coeficiente acido de cobertura de cartera en mora'}
id <- 'indCap_CACCM'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CACCM por tipo de entidad' )
```


\newpage
#### Coeficiente de cobertura patrimonial 

```{r, out.width='100%', fig.cap='Coeficiente de cobertura patrimonial'}
id <- 'indCap_CCP'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CCP por tipo de entidad' )
```

\newpage
### Activo

#### Coeficiente de exposición de cartera

```{r, out.width='100%', fig.cap='Coeficiente de exposición de cartera'}
id <- 'indAct_CEC'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CEC por tipo de entidad' )
```

\newpage
#### Coeficiente de previsión de cartera

```{r, out.width='100%', fig.cap='Coeficiente de previsión de cartera'}
id <- 'indAct_CPC'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CPC por tipo de entidad' )
```

\newpage
#### Coeficiente de previsión de cartera en mora

```{r, out.width='100%', fig.cap='Coeficiente de previsión de cartera en mora'}
id <- 'indAct_CPCM'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CPCM por tipo de entidad' )
```

\newpage
#### Coeficiente de reposición de cartera

```{r, out.width='100%', fig.cap='Coeficiente de reposición de cartera'}
id <- 'indAct_CRC'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CRC por tipo de entidad' )
```


\newpage
### Administración

#### Coeficiente de cobertura gastos administrativos

```{r, out.width='100%', fig.cap='Coeficiente de cobertura gastos administrativos'}
id <- 'indAdm_CCGA'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CCGA por tipo de entidad' )
```

\newpage
#### Coeficiente acido de cobertura gastos administrativos

```{r, out.width='100%', fig.cap='Coeficiente acido de cobertura patrimonial'}
id <- 'indAdm_CACGA'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CACGA por tipo de entidad' )
```

\newpage
### Beneficios

#### Coeficiente de rendimiento sobre activos 

```{r, out.width='100%', fig.cap='Coeficiente de rendimiento sobre activos '}
id <- 'indBenf_ROA'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del ROA por tipo de entidad' )
```

\newpage
#### Coeficiente de rendimiento sobre patrimonio

```{r, out.width='100%', fig.cap='Coeficiente de rendimiento sobre patrimonio'}
id <- 'indBenf_ROE'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del ROE por tipo de entidad' )
```

\newpage
### Liquidez

####  Coeficiente de capacidad de pago frente a pasivos

```{r, out.width='100%', fig.cap='Coeficiente de capacidad de pago frente a pasivos'}
id <- 'indLq_CCPP'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CCPP por tipo de entidad' )
```

\newpage
#### Coeficiente acido de capacidad de pago frente a pasivos

```{r, out.width='100%', fig.cap='Coeficiente acido de capacidad de pago frente a pasivos'}
id <- 'indLq_CACPP'
plotIndCamel(id, datCamelIndNorm)
```

```{r}
datTrendInd <- getDatTrendInd(id, datCamelIndNorm)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia del CACPP por tipo de entidad' )
```

\newpage
## Definición de rangos y limites de los indicadores

```{r}
datCamelRangosLimites <- getDatCamelRangosLimites(datCamelIndNorm)
```


```{r}
getTableCamelRangosLimites(datCamelRangosLimites)
```


## Definición de la ponderación de elementos CAMEL

$$CAMEL = \text{30\%C + 20\%A + 10\%M + 15\%E + 15\%L}$$

\newpage
## Calificación CAMEL

```{r}
datCamelCalificacionIndicadores <- getDatCamelCalificacionIndicadores(datCamelIndNorm,
                                                                      datCamelRangosLimites)

datCamelCalificacionEntidad <- getDatCamelCalificacionEntidad(datCamelCalificacionIndicadores)
```

```{r, out.width='100%', fig.cap='Resultados CAMEL'}
plotIndCamel("CAMEL",datCamelCalificacionEntidad)
```

```{r}
id <- 'CAMEL'
datTrendInd <- getDatTrendInd(id, datCamelCalificacionEntidad)
getTableTrendInd(datTrendInd, 
                 captionTable ='Tendencia CAMEL' )
```



