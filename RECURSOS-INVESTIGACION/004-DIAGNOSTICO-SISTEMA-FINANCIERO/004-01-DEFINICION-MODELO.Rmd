---
output: html_document
---

```{r}
# PAQUETES NECESARIOS
require(glue)

# FUNCIONES NECESARIAS
source("RECURSOS-INVESTIGACION/R/get-dat-basic.R")
source("RECURSOS-INVESTIGACION/R/get-dat-group.R")
source("RECURSOS-INVESTIGACION/R/def-mod-entidades.R")
source("RECURSOS-INVESTIGACION/R/render-table-basic.R")
source("RECURSOS-INVESTIGACION/R/handles.R")

# VARIABLES GLOBALES DEL DOCUMENTO
dat <- getDatEEFF()
entidadesCompModelo <- getEntidadesCompModelo(dat)
datGroupBySector <- getDatEEFFByGroup(dat,by = 'TIPO_DE_ENTIDAD' )
```

## Precisiones del diagnostico financiero presentado

En la presente sección se presentaran las características a la cuales están sujetas el diagnostico presentado en este capítulo.

### Entidades financieras comprendidas por el diagnostico

El numero de observaciones de la datos manejados por esta investigación alcanzan a `r nrow(dat)`, donde cada observación corresponde a un balance general y un estado de resultados en un punto del tiempo entre las fechas (`r min(dat$FECHA)` - `r max(dat$FECHA)`), dichos estados financieros se clasifican o agrupara por sectores financieros los cuales son:

- Bancos múltiples
- Bancos PYME.
- Bancos de desarrollo productivo.
- Instituciones financieras de desarrollo.
- Entidades financieras de vivienda.
- Cooperativas.

Una vez agrupados los datos por sectores los datos dan un total de `r nrow(datGroupBySector)` observaciones.

#### Bancos múltiples

```{r}
idTipoEntidad <- 'BANCOS_MULTIPLES'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r tolower(gsub('_',' ',idTipoEntidad))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{handle$toUpperFirstText(gsub("_"," ",idTipoEntidad))} contenidas en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```


#### Bancos PYME

```{r}
idTipoEntidad <- 'BANCOS_PYME'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r gsub('pyme','PYME',tolower(gsub('_',' ',idTipoEntidad)))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{gsub("pyme","PYME",handle$toUpperFirstText(gsub("_"," ",idTipoEntidad)))} contenidos en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```


#### Bancos de desarrollo productivo

```{r}
idTipoEntidad <- 'BANCOS_DE_DESARROLLO_PRODUCTIVO'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r tolower(gsub('_',' ',idTipoEntidad))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{handle$toUpperFirstText(gsub("_"," ",idTipoEntidad))} contenidas en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```


#### Instituciones financieras de desarrollo

```{r}
idTipoEntidad <- 'INSTITUCIONES_FINANCIERAS_DE_DESARROLLO'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r tolower(gsub('_',' ',idTipoEntidad))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{handle$toUpperFirstText(gsub("_"," ",idTipoEntidad))} contenidas en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```

#### Entidades financieras de vivienda

```{r}
idTipoEntidad <- 'ENTIDADES_FINANCIERAS_DE_VIVIENDA'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r tolower(gsub('_',' ',idTipoEntidad))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{handle$toUpperFirstText(gsub("_"," ",idTipoEntidad))} contenidas en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```

#### Cooperativas

```{r}
idTipoEntidad <- 'COOPERATIVAS_DE_AHORRO_Y_CREDITO'
entidadesModelo <- entidadesCompModelo[entidadesCompModelo$TIPO_DE_ENTIDAD==idTipoEntidad,
                                       c('SIGLA','ENTIDAD','DE','HASTA')]
```

El sector de `r tolower(gsub('_',' ',idTipoEntidad))` representan `r sum(datGroupBySector$TIPO_DE_ENTIDAD==idTipoEntidad)` observaciones del total de los datos agrupados, dicho sector esta comprendido por `r nrow(entidadesModelo)` entidades, que se presentan a continuación:


```{r}
captionTable <- glue('{handle$toUpperFirstText(gsub("_"," ",idTipoEntidad))} contenidas en los datos')
renderTableBasic(entidadesModelo,captionTable = captionTable)
```

### Variables comprendidas en el diganostico

Las variables comprendidas en el modelo del diagnostico están sujetas al manual de cuentas para entidades financieras.

#### Activo

Según [@MANUAL_CUENTAS_ASFI] los activos (designado por el código 100.00 en el manual de cuentas) son aquellas que agrupan las cuentas representativas de bienes y derechos de la entidad, la cuales comprenden:

- Disponibilidades
- Inversiones temporarias
- Cartera
- Otras cuentas por cobrar
- Bienes realizables
- Inversiones permanentes
- Bienes de uso 
- Otros activos. 


#### Disponibles

Según [@MANUAL_CUENTAS_ASFI] los activos disponibles (designado por el código 110.00 en el manual de cuentas) representa el efectivo que mantiene la entidad en caja, los saldos a la vista en el Banco Central de Bolivia, en oficina matriz y sucursales del exterior, en bancos y corresponsales del país y del exterior; así como, la tenencia de metales preciosos. También representa la existencia de cheques, otros documentos mercantiles de cobro inmediato y órdenes electrónicas de pago pendientes de liquidación. 

#### Realizables

- Bienes realizables (150.00)

#### Inversiones temporarias

- Inversiones temporarias (120.00)

#### Pasivos

- Pasivos (200)

#### Patrimonio

- Patrimonio (300.00)

#### Cartera en mora

- Cartera vencida (133.00)
- Cartera en ejecución (134.00)

#### Cartera Bruta

- Cartera vigente (131.00)
- Cartera vencida (133.00)
- Cartera en ejecución (134.00)

#### Cartera reprogramada o restructurada total

- Cartera reprogramada o restructurada vigente (135.00)
- Cartera reprogramada o restructurada vencida (136.00)
- Cartera reprogramada o restructurada en ejecución (137.00)

#### Previsión cartera

- Previsión para incobrabilidad de cartera (139.00)

#### Contingente

- Cuentas contingentes deudoras (600.00)
- Cuentas contingentes acreedoras (700.00)


#### Gastos administrativos

- Gastos de administración (450.00)

#### Impuestos

- Impuestos (455.00)
- Impuestos sobre las utilidades de las empresas (460.00)

#### Resultado operativo bruto

#### Resultado neto de la gestión




